{% extends "auto_base.html" %}
{% block content %}
<div class="row">
    <div class="panel panel-primary">
        <div class="panel-heading"> 用例列表 品类：{{ my_type }} </div>
		<div class="panel-body">
            <a href='/auto/auto_add' type='button' class='btn btn-primary btn-sm'><span class="glyphicon glyphicon-plus"></span> 添加用例</a>
            <a type='submit' class="btn btn-sm btn-default" id="getCases">生成62001配置(给清扬点的~)</a>
            <a type='submit' class="btn btn-sm btn-default" id="getCases1">生成62025配置(给清扬点的~)</a>
		</div>
		<table data-toggle="table" data-striped="true" data-show-refresh="true" data-show-columns="true" data-search="true" data-row-style="rowStyle" style="word-break:break-all;" class="table table-hover table-striped">
			<thead>
				<tr>
					<th class="col-xs-1">
						ID
					</th>
					<th data-field="用例名称" data-sortable="true" class="col-xs-2.5">
						用例名称
					</th>
					<th data-field="品类" data-sortable="true" class="col-xs-1">
						品类
					</th>
					<th data-field="版本" data-sortable="true" class="col-xs-1">
					    版本
					</th>
					<th data-field="平台" data-sortable="true" class="col-xs-1">
					    平台
					</th>
                    <th data-field="所属" data-sortable="true" class="col-xs-1">
						所属
					</th>
					<th data-field="备注" data-sortable="true" class="col-xs-1">
						备注
					</th>
					<th data-field="修改时间" data-sortable="true" class="col-xs-2">
						修改时间
					</th>
                    <th data-field="操作" data-sortable="true" class="col-xs-1.5">
						操作
					</th>
				</tr>
			</thead>
			<tbody id="list">
			{% for x in show_list %}
				<tr>
    				<td><input type="checkbox" name="table_records" value="{{ x.id }}"> {{ x.id }}</td>
    				<td><div name="caseName">{{ x.caseName }}</div></td>
    				<td>{{ x.type_field }}</td>
    				<td>{{ x.version }}</td>
    				<td>{{ x.plantform }}</td>
    				<td>{{ x.owner }}</td>
    				<td>{{ x.des }}</td>
    				<td>{{ x.modify_time|date:"Y-m-d H:i:s" }}</td>
    				<td><a type='button' class="btn btn-sm btn-success" href="/auto/auto_edit/{{ x.id }}/"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> 编辑</a>
                        <button type="submit" class="btn btn-danger btn-sm" id="delCase" data-index="{{ x.id }}" data-toggle="modal" data-target="#deleteModal"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> 删除</button>
                    </td>
                </tr>
			{% endfor %}
			</tbody>
		</table>
	</div>
</div>
<script>
    $(document).ready(function(){
        $("#getCases").click(function(){
            var valArr = new Array;
                device = '62001';
            $('input[name="table_records"]:checked').each(function(i){
                valArr[i] = $(this).val();
            });
            var vals = valArr.join(',');//转换为逗号隔开的字符串
            console.log(vals);

            $.get("/auto/auto_config",{'vals':vals,'device':device})
            // function(ret){
            //     $('#result').html(ret)
            // })
        });
    });
    $(document).ready(function(){
        $("#getCases1").click(function(){
            var valArr = new Array;
                device = '62025';
            $('input[name="table_records"]:checked').each(function(i){
                valArr[i] = $(this).val();
            });
            var vals = valArr.join(',');//转换为逗号隔开的字符串
            console.log(vals);

            $.get("/auto/auto_config",{'vals':vals,'device':device})
            // function(ret){
            //     $('#result').html(ret)
            // })
        });
    });
</script>
{% endblock content %}
