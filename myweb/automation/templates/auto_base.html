<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> 用例管理 </title>
	{% load staticfiles %}
    <!-- Bootstrap -->
	<link rel="shortcut icon" href="{% static 'favicon.ico'%}">
    <link rel="stylesheet" href="{% static 'dist/css/bootstrap.min.css' %}">
	<link href="{% static 'css/bootstrap-datetimepicker.min.css' %}" rel="stylesheet" media="screen">
    <!-- Font Awesome -->
    <link href="{% static 'vendors/font-awesome.min.css' %}" rel="stylesheet">
    <!-- NProgress -->
    <link href="{% static 'vendors/nprogress.css' %}" rel="stylesheet">
    <!-- Custom Theme Style -->
    <link href="{% static 'vendors/custom.min.css' %}" rel="stylesheet">
	<link href="{% static 'css/bootstrap-table.min.css' %}" rel="stylesheet">
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- jquery-editable-select -->
    <script src="{% static 'vendors/jquery-editable-select.min.js' %}"></script>
	<link href="{% static 'vendors/jquery-editable-select.min.css' %}" rel="stylesheet">
	<!--[if lt IE 9]>
	<script src="assets/js/ie8-responsive-file-warning.js"></script>
	<![endif]-->

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
	  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	<style>
    	.tooltip-inner {
        text-align:left;
    	word-break:break-all;
    	}
    	.nav-tabs.nav-justified>.active>a, .nav-tabs.nav-justified>.active>a:focus, .nav-tabs.nav-justified>.active>a:hover { border-bottom-color: #a94442; border-bottom-width: 3px; }
        .xwcms {
        	margin: 0 auto;
        	-webkit-background-size: 220px 220px;
        	-moz-background-size: 220px 220px;
        	background-size: 220px 220px;
        	-webkit-border-radius: 110px;
        	border-radius: 110px;
        	-webkit-transition: -webkit-transform 1s ease-out;
        	-moz-transition: -moz-transform 1s ease-out;
        	-o-transition: -o-transform 1s ease-out;
        	-ms-transition: -ms-transform 1s ease-out;
        }
        .xwcms:hover {
        	-webkit-transform: rotateZ(360deg) scale(1.5);
        	-moz-transform: rotateZ(360deg) scale(1.5);
        	-o-transform: rotateZ(360deg) scale(1.5);
        	-ms-transform: rotateZ(360deg) scale(1.5);
        	transform: rotateZ(360deg) scale(1.5);
        }
    </style>
  </head>

  <body class="nav-md">
    <div class="container body">
      <div class="main_container">
        <div class="col-md-3 left_col"  data-spy="affix" style="position:fixed;">
			<div class="left_col scroll-view">

				<div class="navbar nav_title" style="border: 0;">
					<a class="site_title">用例导航</a>
				</div>

				<br>
				<div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
					<div class="menu_section">
						<hr>
						<h3></h3>
						<ul class="nav side-menu">
                            {% for x in nav_list %}
							<li><a href="/auto/auto_list/{{x.type}}" name="{{ x.type }}"><i class="fa fa-{% if x.type == '废弃' %}trash{% elif x.type == '全部' %}paw{% else %}paperclip{% endif %}  xwcms"></i> {{ x.type }} <span class="label label-primary">{{ x.num }}</span></a>
							</li>
                            {% endfor %}
						</ul>
					</div>
				</div>
			</div>
		</div>

        <!-- top navigation -->
        <div class="top_nav">
          <div class="nav_menu">
            <nav>
              <div class="nav toggle">
                <a id="menu_toggle"><i class="fa fa-bars"></i></a>
              </div>
            </nav>
          </div>
        </div>

        <!-- page content -->
		<script src="{% static 'js/echarts.min.js' %}" charset="UTF-8"></script>
        <div class="right_col" role="main">
		{% block content %}
		{% endblock content %}
		</div>
        <p id="mm">{{message}}</p>
        <!-- footer content -->
        <footer>
          <div class="pull-right">
            &copy; TestTeam 2016 <a href="http://m.lvmama.com">@Lvmama</a>
          </div>
          <div class="clearfix"></div>
        </footer>
        <!-- /footer content -->
      </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="delModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title"> 删除用例 ⊙o⊙!</h4>
                </div>
                <div id='mess' class="modal-body">考虑清楚了吗?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning"  name="delSure"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Yes !</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-log-out" aria-hidden="true"></span> 返回</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="copyModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title"> 用例复制 </h4>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="recipient-name" class="control-label">用例重命名</label>
                            <input type="text" class="form-control" id="recipientName" required="required">
                        </div>
                    </form>
                    <div id='copymess' class="alert alert-info" style="display:none"></div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-success"  name="copyThis"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> 提交</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-log-out" aria-hidden="true"></span> 返回</button>
                </div>
            </div>
        </div>
    </div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
	<script src="{% static 'dist/js/bootstrap.min.js' %}"></script>
	<script src="{% static 'js/bootstrap-table.min.js' %}"></script>
	<script src="{% static 'js/bootstrap-table-zh-CN.min.js' %}"></script>
    <!-- FastClick -->
    <script src="{% static 'vendors/fastclick.js' %}"></script>
    <script src="{% static 'vendors/randomColor.min.js' %}"></script>
    <!-- NProgress -->
    <script src="{% static 'vendors/nprogress.js' %}"></script>
    <!-- Custom Theme Scripts -->
    <script src="{% static 'vendors/custom.min.js' %}"></script>
	<script src="{% static 'js/bootstrap-datetimepicker.min.js' %}" charset="UTF-8"></script>
    <script src="{% static 'js/locales/bootstrap-datetimepicker.zh-CN.js' %}"  charset="UTF-8"></script>

    <script>
        // add什么元素改
        $('#editable-select').editableSelect({ filter: false });
        // add目标元素改
        $('#editable-select1').editableSelect({ filter: false });
        // edit默认要改类
    </script>
	<script>
    	$('#myAffix').affix({
    	  offset: {
    		top: 100,
    		bottom: function () {
    		  return (this.bottom = $('.footer').outerHeight(true))
    		}
    	  }
    	})
	</script>
	<script type="text/javascript">
		$(".form_date").datetimepicker({
			language:  'zh-CN',
			minView: 'month',
			format: "yyyy-mm-dd ",
			autoclose: true,
			todayBtn: true,
			startDate: "2016-08-14",
			minuteStep: 10
		});
	</script>
	<script>
		function runningFormatter(value, row, index){
			return index;
		};
	</script>
    <script>
        $(document).ready(function(){
            $('#deleteModal').on('show.bs.modal', function (e) {
                var btn = $(e.relatedTarget),
                    id = btn.data("index");
                // console.log(id)
                $(this).find('[name="delSure"]').click(function(){
                    $.get("/auto/auto_del",{'id':id}, function(data,status){
                        if (status == 'success' && data == 'success') {
                            $('.modal-body').text('删除成功');
                        //提交失败的操作
                        } else {
                            $('.modal-body').text('已删除或删除失败，请联系管理员');
                        };
                    });
                });
            });

            $('#deleteModal').on('hide.bs.modal', function (){
                window.location.reload();
            });
        });
    </script>
    <script>
        $(document).ready(function(){
            $('#copyModal').on('show.bs.modal', function (e) {
                // 通过data-xxx 传递参数
                var btn = $(e.relatedTarget),
                    id = btn.data("index");
                $(this).find('[name="copyThis"]').click(function(){
                    cName = $('#recipientName').val();
                    $.get("/auto/auto_copy",{'id':id,'cName':cName}, function(data,status){
                        if (status == 'success' && data == '0') {
                            $('#copymess').text('用例名称已存在，请重新输入');
                        } else if (status == 'success' && data == '1') {
                            $('#copymess').text('复制成功');
                        } else if (status == 'success' && data == '3') {
                            $('#copymess').text('请输入用例名称');
                        } else {
                            $('#copymess').text('copy请求失败，请联系管理员确认服务');
                        };
                    });
                    $('#copymess').css('display','block');
                });
            });

            $('#copyModal').on('hide.bs.modal', function (){
                window.location.reload();
            });
        });
    </script>
    <script>
        $('input').bind('input propertychange', function() {
            // console.log($(this).val());
            var regu = /([a-zA-Z0-9]|[,_+-=&%$#@?(){}\[\]\s]|[\u4e00-\u9fa5])/
                myText = $(this).val();
            for(x in myText){
                if(!regu.exec(myText[x])){
                    alert('有特殊字符,请检查');
                    break;
                }
            }
        });
    </script>
  </body>
</html>
